"use strict";define(["css!component/gl-message/index.css","vue"],function(css,Vue){var instance;var instances=[];var seed=1;var vueComponent=Vue.extend({template:'\n        <transition name="t-message-fade">\n            <div class="t-message text-center" :class="msgClass" v-if="visible">\n                <span class="t-icon" :class="iconFont" v-if="true"></span>\n                <span>{{t(msg)}}</span>\n                <span v-show="isShow" class="closeMessage" @click="closeMessage">Ã—</span>\n            </div>\n        </transition>\n        ',data:function data(){return{isShow:false,type:"string",msgClass:"",iconFont:"",visible:false,msg:"",duration:null,node:""}},methods:{closeMessage:function closeMessage(){$("body").find(".t-message").remove()}}});var startHide=function startHide(id,duration,cb){if(duration>0){var timer=setTimeout(function(){Message.close(id,typeof cb==="function"&&cb);clearTimeout(timer)},duration)}};var Message=function Message(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(instances.node){Message.close(instances.node);instances.node=null}if(typeof options==="string"){options={msg:options}}var id="t_message_"+seed++;instances.node=id;instance=new vueComponent({data:options});if(instance.$lang.errorcode[instance.msg]){instance.msg=instance.$lang.errorcode[instance.msg]}if(instance.msg==""||instance.msg==undefined){return}switch(instance.type){case"success":instance.iconFont="fa fa-check";instance.msgClass="msgSuccess";instance.duration=instance.duration?instance.duration:3e3;instance.msg=instance.msg?instance.msg:"Your new settings have been updated successfully.";break;case"error":instance.iconFont="fa fa-times";instance.msgClass="msgError";instance.duration=instance.duration?instance.duration:3e3;instance.msg=instance.msg?instance.msg:"Your new settings haven't been updated successfully. Please try again!";break;case"warning":instance.iconFont="fa fa-exclamation-triangle";instance.msgClass="msgWarning";instance.duration=instance.duration?instance.duration:3e3;instance.msg=instance.msg?instance.msg:"Your operation is in progress.";break;default:instance.iconFont="fa fa-spinner fa-pulse";instance.duration=instance.duration?instance.duration:5e3;instance.msg=instance.msg?instance.msg:"Your operation is in progress."}instance.id=id;var component=instance.$mount();$("body").append(component.$el);component.visible=true;instances.push(instance);component.close=function(){Message.close(id,options.onClose)};startHide(id,instance.duration,options.onClose);return component};Message.close=function(id,closeCallback){for(var i=0,len=instances.length;i<len;i++){var _instance=instances[i];var component=_instance.$mount();if(id===_instance.id){if(typeof closeCallback==="function"){closeCallback(_instance)}component.$destroy(true);$("body").find(component.$el).remove();instances.splice(i,1);break}}};return Message});